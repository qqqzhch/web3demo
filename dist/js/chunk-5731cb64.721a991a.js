(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5731cb64"],{"0ee2":function(t,e,s){"use strict";s.d(e,"a",(function(){return i}));var a=s("1da1");s("96cf"),s("d3b7"),s("25f0"),s("07c7"),s("6df3");function i(t){return r.apply(this,arguments)}function r(){return r=Object(a["a"])(regeneratorRuntime.mark((function t(e){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getGasPrice();case 2:return s=t.sent,t.abrupt("return",s.toString());case 4:case"end":return t.stop()}}),t)}))),r.apply(this,arguments)}},"0f8b":function(t,e,s){},6853:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{"input-group":!0,"input-focus":t.focus,"input-error":t.isError}},[t.title?s("div",{staticClass:"input-prepend"},[t._v(" "+t._s(t.title)+" ")]):t._e(),s("input",{directives:[{name:"model",rawName:"v-model",value:t.inputVal,expression:"inputVal"}],class:{"input-inner":!0,"no-title":!t.title},attrs:{type:"input",name:"repay",autoComplete:"off",placeholder:t.placetext,disabled:t.disabled},domProps:{value:t.inputVal},on:{focus:t.onInputFocus,blur:t.onInputBlur,input:function(e){e.target.composing||(t.inputVal=e.target.value)}}}),s("div",{staticClass:"input-append"},[t._v(" "+t._s(t.unit)+" ")])])},i=[],r={name:"ScInput",props:["title","unit","placetext","disabled","onChange","defaultValue","isError"],data:function(){return{inputVal:"",focus:!1}},methods:{onInputFocus:function(){this.focus=!0},onInputBlur:function(){this.focus=!1},onChangeValue:function(t){var e=t||0;this.onChange&&this.onChange(e)}},watch:{inputVal:function(t){this.onChangeValue(t)},defaultValue:function(t){this.inputVal=t}},created:function(){this.onChangeValue(this.inputVal)}},n=r,o=(s("7b49"),s("2877")),l=Object(o["a"])(n,a,i,!1,null,"1c42f5ce",null);e["a"]=l.exports},"7b49":function(t,e,s){"use strict";s("e652")},a96b:function(t,e,s){"use strict";s("0f8b")},e652:function(t,e,s){},f2dd:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"create box-shadow"},[t.isMobile?t._e():a("div",{staticClass:"header"},[a("div",{staticClass:"title"},[t._v(" "+t._s(t.$t("build-deposit-digital-assets"))+" ")])]),t.isMobile?a("div",[a("div",{staticClass:"content-left"},[a("div",{staticClass:"pool-title"},[t._v(" "+t._s(t.defaultPool.title)+" ")]),a("div",{staticClass:"input-warpper flex justify-between items-center"},[a("div",{staticClass:"mortgage"},[t._v(" "+t._s(t.$t("build-Deposit"))+" ")]),a("div",{staticClass:"pull-right"},[a("p",{staticClass:"balance"},[a("span",[t._v(t._s(t.$t("build-balance"))+" ")]),t._v(t._s(t._f("formatNormalValue")(t.accountBalance))+" "+t._s(t.defaultPool.token)+" ")])])]),a("div",{staticClass:"Input-item"},[a("ScInput",{staticClass:"myInput",attrs:{title:"","default-value":t.depositAmount,unit:t.defaultPool.token,"on-change":t.onChangeDepositAmount,"is-error":t.errorInfo}}),a("img",{attrs:{src:t.getTokenImg(t.defaultPool.token),alt:t.defaultPool.token}})],1),t._m(1),a("div",{staticClass:"Input-item"},[a("ScInput",{staticClass:"myInput",attrs:{title:"",unit:t.stableName,"default-value":t.borrowAmount,"on-change":t.onChangeBorrowAmount}}),a("img",{attrs:{src:t.getTokenImg(t.stableName),alt:t.stableName}})],1)]),a("div",{staticClass:"content-right mrg-t-20"},[a("div",{staticClass:"build-grid-2 mrg-b-5"},[a("div",{staticClass:"f-size-20"},[t._v(" "+t._s(t.$t("vault-collateral"))+"： ")]),a("div",{staticClass:"text-right f-size-20"},[t._v(" "+t._s(t.depositAmount)+" "+t._s(t.defaultPool.token)+" ")])]),a("div",{staticClass:"build-grid-2 mrg-b-5"},[a("div",{staticClass:"f-size-20"},[t._v(" "+t._s(t.$t("build-debt"))+"： ")]),a("div",{staticClass:"text-right f-size-20"},[t._v(" "+t._s(t.borrowAmount)+" "+t._s(t.stableName)+" ")])]),a("div",{staticClass:"build-grid-2 mrg-b-5 mrg-t-20"},[a("p",[t._v(t._s(t.$t("vault-liquidation-reserve"))+"：")]),a("div",{staticClass:"text-right"},[t._v(" "+t._s(t.troveIndicators.liquidationReserve)+" "+t._s(t.stableName)+" ")])]),a("div",{staticClass:"build-grid-2 mrg-b-5"},[a("p",[t._v(t._s(t.$t("vault-borrowing-fee"))+"：")]),a("div",{staticClass:"text-right"},[t._v(" "+t._s(t._f("formatNormalValue")(t.BigNumber(t.borrowLUSDAmount).times(t.troveIndicators.borrowingRate)))+" "+t._s(t.stableName)+" ("+t._s(t.BigNumber(t.troveIndicators.borrowingRate).times(100))+"%) ")])]),a("div",{staticClass:"build-grid-2 mrg-b-5 mrg-t-20"},[a("p",[t._v(" BNB Price： ")]),a("div",{staticClass:"text-right"},[t._v(" $ "+t._s(t._f("formatNormalValue")(t.troveIndicators.price))+" ")])]),a("div",{staticClass:"build-grid-2 mrg-b-5"},[a("p",[t._v("Collateral Ratio：")]),a("div",{staticClass:"text-right"},[t._v(" "+t._s(t._f("formatNormalValue")(t.BigNumber(t.troveIndicators.collateralRatio).times(100).toNumber()))+" % ")])]),a("div",{staticClass:"build-grid-2 mrg-b-5"},[a("p",[t._v(t._s(t.$t("build-liquidation-ratio"))+"：")]),a("div",{staticClass:"text-right"},[t._v(" 110% ")])]),t.errorInfo||t.gasErrorMsg?a("div",{staticClass:"notice-content"},[a("img",{attrs:{src:s("fb2e")}}),a("div",{staticClass:"error-info"},[t._v(" "+t._s(t.errorInfo||t.gasErrorMsg)+" ")])]):t._e(),t.gasAmount&&!t.gasErrorMsg?a("div",{staticClass:"notice-content-gas"},[a("div",[t._v(" Gas Fee: "+t._s(t.BigNumber(t.gasAmount).times(t.gasPrice).div("1e18").toString())+"BNB "),a("br"),t._v('Adjusting the quantity of "Deposit" and "Debt" will effectively reduce the Gas Fee. ')])]):t._e(),t.gasErrorMsg?a("div",{staticClass:"notice-content-gas"},[a("div",[t._v(' Adjusting the quantity of "Deposit" and "Debt" will effectively reduce the Gas Fee. ')])]):t._e(),a("div",[t.errorInfo||t.gasErrorMsg||t.btnLoading?t._e():a("button",{staticClass:"btn",on:{click:t.onOpenTroveClick}},[t._v(" "+t._s(t.$t("build-create-vault"))+" ")]),t.errorInfo||t.gasErrorMsg||!t.btnLoading?t._e():a("button",{staticClass:"btn"},[t._v(" Loading... ")]),t.errorInfo||t.gasErrorMsg?a("button",{staticClass:"btn btn-disabled"},[t._v(" "+t._s(t.$t("build-create-vault"))+" ")]):t._e()])])]):a("div",{staticClass:"grid-2 mrg-tb-20"},[a("div",{staticClass:"content-left"},[a("div",{staticClass:"asset-item cursor-pointer"},[a("div",{staticClass:"connect flex justify-between items-center"},[a("div",{staticClass:"icon-wrapper flex justify-start items-center"},[t._l(t.collateralPools,(function(e,s){return[t.defaultPool.name===e.name?a("img",{key:s,staticClass:"mr-2",attrs:{src:t.getTokenImg(e.token),alt:e.token}}):t._e()]})),a("span",[t._v(t._s(t.defaultPool.title))])],2)])]),a("div",{staticClass:"input-warpper flex justify-between items-center mrg-t-20 mrg-b-5"},[a("div",{staticClass:"mortgage"},[t._v(" "+t._s(t.$t("build-Deposit"))+" ")]),a("div",{staticClass:"pull-right"},[a("p",{staticClass:"balance"},[a("span",[t._v(t._s(t.$t("build-balance"))+" ")]),t._v(t._s(t._f("formatNormalValue")(t.accountBalance))+" "+t._s(t.defaultPool.token)+" ")])])]),a("div",{staticClass:"Input-item"},[a("ScInput",{staticClass:"myInput",attrs:{title:"","default-value":t.depositAmount,unit:t.defaultPool.token,"on-change":t.onChangeDepositAmount,"is-error":t.errorInfo}}),a("img",{attrs:{src:t.getTokenImg(t.defaultPool.token),alt:t.defaultPool.token}})],1),t._m(0),a("div",{staticClass:"Input-item"},[a("ScInput",{staticClass:"myInput",attrs:{title:"",unit:t.stableName,"default-value":t.borrowAmount,"on-change":t.onChangeBorrowAmount}}),a("img",{attrs:{src:t.getTokenImg(t.stableName),alt:t.stableName}})],1)]),a("div",{staticClass:"content-right"},[a("div",{staticClass:"build-grid-2 mrg-b-5"},[a("p",{staticClass:"f-size-20"},[t._v(" "+t._s(t.$t("vault-collateral"))+"： ")]),a("div",{staticClass:"text-right f-size-20"},[t._v(" "+t._s(t.depositAmount)+" "+t._s(t.defaultPool.token)+" ")])]),a("div",{staticClass:"build-grid-2 mrg-b-5"},[a("p",{staticClass:"f-size-20"},[t._v(" "+t._s(t.$t("build-debt"))+"： ")]),a("div",{staticClass:"text-right f-size-20"},[t._v(" "+t._s(t.borrowAmount)+" "+t._s(t.stableName)+" ")])]),a("div",{staticClass:"build-grid-2 mrg-b-5 mrg-t-20"},[a("p",[t._v(t._s(t.$t("vault-liquidation-reserve"))+"：")]),a("div",{staticClass:"text-right"},[t._v(" "+t._s(t.troveIndicators.liquidationReserve)+" "+t._s(t.stableName)+" ")])]),a("div",{staticClass:"build-grid-2 mrg-b-5"},[a("p",[t._v(t._s(t.$t("vault-borrowing-fee"))+"：")]),a("div",{staticClass:"text-right"},[t._v(" "+t._s(t._f("formatNormalValue")(t.BigNumber(t.borrowLUSDAmount).times(t.troveIndicators.borrowingRate)))+" "+t._s(t.stableName)+" ("+t._s(t.BigNumber(t.troveIndicators.borrowingRate).times(100))+"%) ")])]),a("div",{staticClass:"build-grid-2 mrg-b-5 mrg-t-20"},[a("p",[t._v(" BNB Price： ")]),a("div",{staticClass:"text-right"},[t._v(" $ "+t._s(t._f("formatNormalValue")(t.troveIndicators.price))+" ")])]),a("div",{staticClass:"build-grid-2 mrg-b-5"},[a("p",[t._v("Collateral Ratio：")]),a("div",{staticClass:"text-right"},[t._v(" "+t._s(t._f("formatNormalValue")(t.BigNumber(t.troveIndicators.collateralRatio).times(100).toNumber()))+" % ")])]),a("div",{staticClass:"build-grid-2 mrg-b-5"},[a("p",[t._v(t._s(t.$t("build-liquidation-ratio"))+"：")]),a("div",{staticClass:"text-right"},[t._v(" 110% ")])]),t.errorInfo||t.gasErrorMsg?a("div",{staticClass:"notice-content"},[a("img",{attrs:{src:s("fb2e")}}),a("p",[t._v(t._s(t.errorInfo||t.gasErrorMsg))])]):t._e(),t.gasAmount&&!t.gasErrorMsg?a("div",{staticClass:"notice-content-gas"},[a("div",[t._v(" Gas Fee: "+t._s(t.BigNumber(t.gasAmount).times(t.gasPrice).div("1e18").toString())+"BNB "),a("br"),t._v('Adjusting the quantity of "Deposit" and "Debt" will effectively reduce the Gas Fee. ')])]):t._e(),t.gasErrorMsg?a("div",{staticClass:"notice-content-gas"},[a("div",[t._v(' Adjusting the quantity of "Deposit" and "Debt" will effectively reduce the Gas Fee. ')])]):t._e(),a("div",[t.errorInfo||t.gasErrorMsg||t.btnLoading?t._e():a("button",{staticClass:"btn",on:{click:t.onOpenTroveClick}},[t._v(" "+t._s(t.$t("build-create-vault"))+" ")]),t.errorInfo||t.gasErrorMsg||!t.btnLoading?t._e():a("button",{staticClass:"btn"},[t._v(" Loading... ")]),t.errorInfo||t.gasErrorMsg?a("button",{staticClass:"btn btn-disabled"},[t._v(" "+t._s(t.$t("build-create-vault"))+" ")]):t._e()])])]),a("haveSendDialog",{ref:"haveSendtx"}),a("assetDialog",{ref:"asset"})],1)},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex"},[s("div",{staticClass:"title-build"},[t._v(" Debt ")]),s("div",{staticClass:"pull-right"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex"},[s("div",{staticClass:"title-build"},[t._v(" Debt ")]),s("div",{staticClass:"pull-right"})])}],r=s("1da1"),n=s("5530"),o=(s("96cf"),s("d3b7"),s("3ca3"),s("ddb0"),s("b0c0"),s("25f0"),s("2f62")),l=s("901e"),u=s.n(l),c=s("5bed"),d=s("49b0"),b=s("6853"),v=s("b530"),g=s("12cb"),m=s("97a5"),f=s("4e7c"),h=s("0ee2"),p={name:"create",data:function(){return{stableName:m["h"],currencyNumber:0,collateralPools:[],defaultPool:{},BigNumber:u.a,depositAmount:0,borrowAmount:0,errorInfo:"",btnLoading:!1,gasAmount:0,gasPrice:0,gasErrorMsg:""}},components:{ScInput:b["a"],haveSendDialog:function(){return s.e("chunk-5a684c79").then(s.bind(null,"9d5f"))},assetDialog:function(){return s.e("chunk-e45c2a6a").then(s.bind(null,"07b6"))},Loading:function(){return s.e("chunk-6f442e8e").then(s.bind(null,"83ab0"))}},mounted:function(){var t=this;c["a"].$on("txsuccess",(function(){var e={stableName:t.stableName,depositAmount:t.depositAmount,borrowAmount:t.borrowLUSDAmount};"create"===t.$route.name&&t.$refs.haveSendtx.open(e,"ok")}))},computed:Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(o["c"])(["web3","ethersprovider","ethChainID","ethAddress","isMobile"])),Object(o["c"])("buildr",["liquityState","isOpen"])),{},{isReady:function(){return this.ethersprovider&&this.ethChainID&&this.ethAddress},troveIndicators:function(){return Object(m["b"])(this.liquityState,this.depositAmount,this.borrowAmount)},accountBalance:function(){return this.liquityState.accountBalance.toString()},borrowLUSDAmount:function(){var t=this.troveIndicators,e=t.liquidationReserve,s=t.borrowingRate;return this.borrowAmount<20?0:u()(this.borrowAmount).minus(e).div(u()(1).plus(s)).plus(1e-6).toNumber()}}),methods:{getTokenImg:function(t){var e=this.ethChainID;return Object(d["b"])(t,e)},checkIsOpen:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.isOpen){e.next=4;break}t.$router.push("/vault/balance"),e.next=8;break;case 4:return t.getPools(),e.next=7,Object(h["a"])(t.ethersprovider);case 7:t.gasPrice=e.sent;case 8:case"end":return e.stop()}}),e)})))()},getPools:function(){this.collateralPools=Object(v["a"])(this.ethChainID),this.defaultPool=this.collateralPools[0]},validate:function(){var t="";if(u()(this.depositAmount).lt(0))t=g["a"].t("notice.swapNotice.n2");else if(isNaN(this.depositAmount))t=g["a"].t("notice.buidrNotice.n1");else{var e={state:this.liquityState,trove:this.liquityState.trove,borrowingRate:this.liquityState.borrowingRate,depositAmount:this.depositAmount,borrowAmount:this.borrowAmount};t=Object(f["a"])(e)}this.errorInfo=t},calcGasEstimate:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=Object(n["a"])(Object(n["a"])({},t.getParams()),{},{borrowLUSDAmount:t.borrowLUSDAmount,depositAmount:t.depositAmount,liquityState:t.liquityState}),t.btnLoading=!0,e.prev=2,e.next=5,Object(m["f"])(s);case 5:t.gasAmount=e.sent,t.btnLoading=!1,e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](2),t.gasErrorMsg=e.t0&&e.t0.data&&e.t0.data.message,t.btnLoading=!1;case 13:case"end":return e.stop()}}),e,null,[[2,9]])})))()},onChangeDepositAmount:function(t){this.gasAmount=0,this.gasErrorMsg="",this.depositAmount=t||"",this.depositAmount&&!this.borrowAmount&&(this.borrowAmount=m["a"]),this.validate(),this.errorInfo||this.calcGasEstimate()},onChangeBorrowAmount:function(t){this.gasAmount=0,this.gasErrorMsg="",this.borrowAmount=t||"",this.validate(),this.errorInfo||this.calcGasEstimate()},getParams:function(){var t=this.defaultPool.token;return{tokenName:t,chainID:this.ethChainID,library:this.ethersprovider,account:this.ethAddress,web3:this.web3}},onOpenTroveClick:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.depositAmount&&t.borrowLUSDAmount){e.next=3;break}return t.errorInfo=g["a"].t("notice.swapNotice.n2"),e.abrupt("return");case 3:return s=Object(n["a"])(Object(n["a"])({},t.getParams()),{},{borrowLUSDAmount:t.borrowLUSDAmount,depositAmount:t.depositAmount,liquityState:t.liquityState}),t.btnLoading=!0,e.prev=5,e.next=8,Object(m["g"])(s);case 8:a=e.sent,t.sendtx(a),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](5),t.btnLoading=!1;case 15:case"end":return e.stop()}}),e,null,[[5,12]])})))()},sendtx:function(t){t&&t.base?(this.$refs.haveSendtx.open(t.base,"created"),c["a"].$emit("sendtx",[t.transaction.rawSentTransaction,{okinfo:t.base+" "+g["a"].t("vault-success"),failinfo:t.base+" "+g["a"].t("vault-Fail")}])):this.$Notice.error({title:g["a"].t("notice.buidrNotice.n3")})}},watch:{isReady:function(t){t&&this.checkIsOpen()}},created:function(){this.isReady&&this.checkIsOpen()}},_=p,C=(s("a96b"),s("2877")),A=Object(C["a"])(_,a,i,!1,null,"51a86fc5",null);e["default"]=A.exports},fb2e:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAqklEQVQoU2NkgIL/oQxsDC8Y0hn+M0QzMDBoQYWvMTAyLGWQYJjJuJrhF0iMEUT8t2SQZmBm2MLAwGAAMwCNvsDwl8GH8TjDU0awyc8ZTqIoNnSAqD9/AFnfBQZJBnPG/7YMuQz/GSahmJjYAOHOh9IwSUaGPMb/NgwnGBgYzInSwMBwEqThEwMDAy+RGj6TpQHTSdg9DXLESeyexqUB7GlSg5XkiCM1aQAAzyZIc7QaxZMAAAAASUVORK5CYII="}}]);
//# sourceMappingURL=chunk-5731cb64.721a991a.js.map