(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f6f018c"],{"09b6":function(t,e,r){t.exports=r.p+"img/backspace.59e0f9e0.svg"},1136:function(t,e,r){"use strict";r("2dac")},"1a64":function(t,e,r){t.exports=r.p+"img/delete-b.7cf746d1.svg"},"2dac":function(t,e,r){},"60d1":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"troves-wrapper"},[n("div",{staticClass:"content"},[n("div",{staticClass:"title-warpper"},[n("div",{staticClass:"title-content"},[n("img",{attrs:{src:r("d682"),alt:"import"}}),n("h2",[t._v(t._s(t.$t("troves.title")))])]),n("p",[t._v(t._s(t.$t("troves.subTitle1")))]),n("p",[t._v(" "+t._s(t.$t("troves.subTitle2"))+" ")])])]),n("div",{staticClass:"list-wapper"},[n("h2",[t._v(t._s(t.$t("troves.tableTitle")))]),t.showLoading?n("div",[n("loading")],1):n("Scroll",{attrs:{"loading-text":"loading....","on-reach-bottom":t.onreachbottom,height:400}},[n("Table",{attrs:{columns:t.getColumns,data:t.troveList},scopedSlots:t._u([{key:"Owner",fn:function(e){var r=e.row;return[n("div",{staticClass:"Owner"},[n("p",[t._v(t._s(t.getShortAddress(r.ownerAddress)))])])]}},{key:"Collateral",fn:function(e){var r=e.row;return[n("div",{staticClass:"Collateral"},[n("p",[t._v(t._s(r.collateral)+" BNB")])])]}},{key:"Debt",fn:function(e){var r=e.row;return[n("div",{staticClass:"Debt"},[n("p",[t._v(t._s(r.Debt)+" LAI")])])]}},{key:"Coll.Ratio",fn:function(e){var r=e.row;return[n("div",{staticClass:"Coll.Ratio"},[n("p",{class:r.color},[t._v(" "+t._s(r.collateralRatio)+" ")])])]}},{key:"Coll.Liquidate",fn:function(e){var a=e.row;return[n("div",{staticClass:"Coll.Ratio"},[n("p",[0==a.disable?n("img",{attrs:{src:r("09b6"),alt:"delete"},on:{click:function(e){return t.cleartrove(a.ownerAddress,a.disable)}}}):n("Tooltip",{attrs:{content:a.disable,placement:"left"}},[n("img",{attrs:{src:r("1a64"),alt:"delete"}})])],1)])]}}])})],1)],1)])},a=[],i=r("5530"),o=r("1da1"),s=(r("159b"),r("99af"),r("fb6a"),r("d3b7"),r("3ca3"),r("ddb0"),r("96cf"),r("2f62")),c=r("5bed"),u=r("7929"),l=r("b565"),d={mixins:[u["a"]],data:function(){return{troveList:[],shortAdress:"",clampedPage:0,showLoading:!1,shortTableAdress:[]}},methods:{cleartrove:function(t,e){var r=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(0!=e){n.next=15;break}return n.prev=2,n.next=5,r.liquity.send.liquidate(t,{gasLimit:r.$globalConfig.gasLimit});case 5:a=n.sent,c["a"].$emit("sendSuccess"),c["a"].$emit("sendtx",[a.rawSentTransaction,{okinfo:"Liquidation ".concat(t," success"),failinfo:"Liquidation ".concat(t," fail")}]),n.next=13;break;case 10:n.prev=10,n.t0=n["catch"](2);case 13:n.next=16;break;case 15:r.$Notice.warning({title:r.$t("notice.n"),desc:e});case 16:case"end":return n.stop()}}),n,null,[[2,10]])})))()},onreachbottom:function(){this.$data.clampedPage+=1,this.list()},list:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r,n,a,i,o,s,c,u,d,b;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=20,n=t.$data.clampedPage,a=t.liquityState,a.numberOfTroves,i=a.price,o=a.total,s=a.lusdInStabilityPool,c=a.blockTag,u=o.collateralRatioIsBelowCritical(i),d=o.collateralRatio(i),e.next=7,t.liquity.getTroves({first:r,sortedBy:"ascendingCollateralRatio",startingAt:n*r},{blockTag:c});case 7:b=e.sent,b.forEach((function(e){e.disable=u?t.liquidatableInRecoveryMode(e,i,d,s):t.liquidatableInNormalMode(e,i);var r=e.collateralRatio(i);e.color=r.gt(l["CRITICAL_COLLATERAL_RATIO"])?"success":r.gt(1.2)?"warning":"danger",e.collateral=e.collateral.prettify(),e.Debt=e.debt.prettify(),e.collateralRatio=r.mul(100).prettify()+"%"})),t.$data.troveList=t.$data.troveList.concat(b);case 10:case"end":return e.stop()}}),e)})))()},liquidatableInRecoveryMode:function(t,e,r,n){var a=t.collateralRatio(e);return a.gte(l["MINIMUM_COLLATERAL_RATIO"])&&a.lt(r)?!t.debt.lte(n)&&"There's not enough LAY in the Stability pool to cover the debt":this.liquidatableInNormalMode(t,e)},liquidatableInNormalMode:function(t,e){return!t.collateralRatioIsBelowMinimum(e)&&"Collateral ratio not low enough"},getShortAddress:function(t){return"".concat(t.slice(0,6),"...").concat(t.slice(-6))}},mounted:function(){var t=this;this.$data.showLoading=!0;var e=this;c["a"].$on("txsuccess",(function(){setTimeout((function(){e.$data.clampedPage=0,e.$data.troveList=[],e.list()}),3e3)}));var r=setInterval((function(){if(e.liquityState&&e.liquityState.price&&t.liquity&&t.liquity.getTroves){clearInterval(r);try{e.list()}catch(n){}t.$data.showLoading=!1}}),100)},computed:Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(s["c"])("pool",["liquity","isMobile"])),Object(s["c"])("buildr",["liquityState","liquityReady"])),{},{liquityInstance:function(){var t=this.liquity&&this.liquity.send;return t},getColumns:function(){var t=[{title:this.$t("troves.owner"),slot:"Owner",minWidth:250},{title:this.$t("troves.collateral"),slot:"Collateral",minWidth:200},{title:this.$t("troves.debt"),slot:"Debt",minWidth:200},{title:this.$t("troves.ratio"),slot:"Coll.Ratio",minWidth:200},{title:this.$t("troves.liquidate"),slot:"Coll.Liquidate",minWidth:150}];return t}}),components:{loading:function(){return r.e("chunk-6f442e8e").then(r.bind(null,"83ab0"))}}},b=d,h=(r("1136"),r("2877")),p=Object(h["a"])(b,n,a,!1,null,"60356c5a",null);e["default"]=p.exports},7929:function(t,e,r){"use strict";var n,a,i,o=r("5530"),s=(r("b0c0"),r("2f62")),c=r("97a5"),u=r("c00b"),l=r("bcab"),d=r("5bed"),b=r("b012"),h=!1,p={inject:["reload"],data:function(){return{liquityReady:!1,AddressZero:u["a"],undefinedAddress:"undefined"}},computed:Object(o["a"])(Object(o["a"])({},Object(s["c"])(["ethersprovider","ethChainID","ethAddress"])),{},{isReady:function(){return this.ethersprovider&&this.ethChainID&&this.undefinedAddress},isConnect:function(){return this.ethersprovider&&this.ethChainID&&this.ethAddress}}),methods:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(s["b"])("buildr",["setLiquityState"])),Object(s["b"])("pool",["setLiquityMethods"])),{},{getLiquityInstance:function(){var t=this.ethersprovider,e=this.ethAddress,r=this.ethChainID,n=Object(l["_connectByChainId"])(t,e?t.getSigner(e):void 0,r,{userAddress:e,frontendTag:u["a"],useStore:"blockPolled"}),a=l["EthersLiquity"]._from(n);this.setLiquityMethods(a)},init:b((function(){var t=this,e={chainID:this.ethChainID,library:this.ethersprovider,account:this.ethAddress};n=Object(c["e"])(e),n.store.onLoaded=function(){t.setLiquityState(n.store.state),t.liquityReady=!0,t.getLiquityInstance()},!1===h&&this.ethAddress?(n.store.subscribe((function(e){var r=e.newState;e.oldState;t.setLiquityState(r)})),h=!0):this.liquityReady=!0,n.store.start()}),1e3)}),watch:{isReady:function(t){t&&this.init()},isConnect:function(t){t&&this.init()}},created:function(){this.isReady&&this.init()},mounted:function(){var t=this;d["a"].$on("txsuccess",(function(){"lpPool"==t.$route.name&&t.reload()}))}},f=p,v=r("2877"),m=Object(v["a"])(f,a,i,!1,null,null,null);e["a"]=m.exports},"97a5":function(t,e,r){"use strict";r.d(e,"h",(function(){return h})),r.d(e,"a",(function(){return v})),r.d(e,"e",(function(){return g})),r.d(e,"f",(function(){return w})),r.d(e,"g",(function(){return y})),r.d(e,"c",(function(){return L})),r.d(e,"b",(function(){return C})),r.d(e,"d",(function(){return q}));var n=r("1da1"),a=(r("96cf"),r("d3b7"),r("25f0"),r("99af"),r("b565")),i=r("c00b"),o=r("a078"),s=r("bcab"),c=s.EthersLiquity,u=s._connectByChainId,l=(new a["Percent"](a["MINIMUM_COLLATERAL_RATIO"]).toString(0),new a["Percent"](a["CRITICAL_COLLATERAL_RATIO"]).toString(0),i["a"]),d=.005,b=o["a"].gasLimit,h="LAI",p=1.1,f=20,v=200,m=function(t){return t.borrowingRate.add(d).toString()},g=function(t){var e=t.library,r=t.account,n=t.chainID,a=u(e,r?e.getSigner(r):void 0,n,{userAddress:r,frontendTag:l,useStore:"blockPolled"}),i=c._from(a);return i},w=function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var r,n,a,i,o,s,c,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.liquity,n=e.library,a=e.account,i=e.chainID,o=e.depositAmount,s=e.borrowLUSDAmount,r=r||g({library:n,account:a,chainID:i}),t.next=4,r.populate.openTrove({depositCollateral:o,borrowLUSD:s});case 4:return c=t.sent,t.prev=5,t.next=8,n.estimateGas(c.rawPopulatedTransaction);case 8:u=t.sent,u=u.add(5e4).toString(),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](5);case 15:return t.abrupt("return",u);case 16:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e){return t.apply(this,arguments)}}(),y=function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var r,n,a,i,o,s,c,u,l,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.library,n=e.account,a=e.chainID,i=e.depositAmount,o=e.borrowLUSDAmount,s=e.liquityState,c=g({library:r,account:n,chainID:a}),u=m(s),t.next=5,w({liquity:c,library:r,account:n,chainID:a,depositAmount:i,borrowLUSDAmount:o});case 5:return l=t.sent,t.next=8,c.send.openTrove({depositCollateral:i,borrowLUSD:o},u,{gasLimit:l});case 8:return d=t.sent,t.abrupt("return",{base:"Deposit: ".concat(i," BNB, Debt: ").concat(o," ").concat(h),transaction:d});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),L=function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var r,n,a,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.library,n=e.account,a=e.chainID,i=g({library:r,account:n,chainID:a}),t.next=4,i.send.closeTrove({gasLimit:b});case 4:return o=t.sent,t.abrupt("return",{base:"Close Vault",transaction:o});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),R=function(t,e,r){var n=t.whatChanged(e,r);return n&&"invalidCreation"!==n.type&&n.params.borrowLUSD?n.params.borrowLUSD.mul(r):a["Decimal"].ZERO},C=function(t,e,r){var n=t.trove,i=new a["Trove"](n.collateral,n.debt),o=t.price,s=t.borrowingRate;i=i.setCollateral(e),i=i.setDebt(r);var c=R(n,i,s).toString(),u=i.isEmpty?"":i.collateralRatio(o).toString();return{stableName:h,liquidationReserve:f,price:o,borrowingRate:s,borrowingFee:c,collateralRatio:u,liquidationRatio:p}},I={deposit:"Deposit",withdraw:"Withdraw",borrow:"Borrow",repay:"Repay"},q=function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var r,n,a,i,o,s,c,u,l,d,h;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=e.library,n=e.account,a=e.chainID,i=e.liquityState,o=e.type,s=e.coinAmount,c=e.unit,u=g({library:r,account:n,chainID:a}),l=m(i),d={},t.t0=o,t.next="deposit"===t.t0?7:"withdraw"===t.t0?9:"borrow"===t.t0?11:"repay"===t.t0?13:15;break;case 7:return d={depositCollateral:s},t.abrupt("break",15);case 9:return d={withdrawCollateral:s},t.abrupt("break",15);case 11:return d={borrowLUSD:s},t.abrupt("break",15);case 13:return d={repayLUSD:s},t.abrupt("break",15);case 15:return t.next=17,u.send.adjustTrove(d,l,{gasLimit:b});case 17:return h=t.sent,t.abrupt("return",{base:"".concat(I[o]," ").concat(s," ").concat(c),transaction:h});case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},b012:function(t,e){function r(t,e,r){var n,a,i,o,s;function c(){var u=Date.now()-o;u<e&&u>=0?n=setTimeout(c,e-u):(n=null,r||(s=t.apply(i,a),i=a=null))}null==e&&(e=100);var u=function(){i=this,a=arguments,o=Date.now();var u=r&&!n;return n||(n=setTimeout(c,e)),u&&(s=t.apply(i,a),i=a=null),s};return u.clear=function(){n&&(clearTimeout(n),n=null)},u.flush=function(){n&&(s=t.apply(i,a),i=a=null,clearTimeout(n),n=null)},u}r.debounce=r,t.exports=r},d682:function(t,e,r){t.exports=r.p+"img/import.9780092e.svg"}}]);
//# sourceMappingURL=chunk-2f6f018c.c6642392.js.map