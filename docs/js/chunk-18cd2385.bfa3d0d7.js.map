{"version":3,"sources":["webpack:///./src/assets/img/closeBtn.svg","webpack:///./src/assets/img/wenhao.svg","webpack:///./src/views/vault/balance/dialog/close/index.vue?0be9","webpack:///./src/views/vault/balance/dialog/close/index.vue?9a7d","webpack:///./src/views/vault/balance/dialog/close/index.js","webpack:///./src/views/vault/balance/dialog/close","webpack:///./src/views/vault/balance/dialog/close/index.vue?4645","webpack:///./src/assets/img/notice-red.png"],"names":["module","exports","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","model","value","callback","$$v","isOpen","expression","loading","_e","_v","getTokenImg","poolData","tokenName","_s","_f","depositAmount","$t","stableName","debtAmount","LAIBalance","liquidationReserve","class","collateralRatio","BigNumber","times","toFixed","shortDebt","Number","btnLoading","on","onCloseTroveClick","closeDialog","staticRenderFns","inject","data","components","Loading","computed","mapState","minus","methods","token","$parent","open","getLAIBalance","params","chainID","ethChainID","library","ethersprovider","account","ethAddress","web3","fetchTokenBalance","closeTrove","tx","sendtx","component"],"mappings":"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","file":"js/chunk-18cd2385.bfa3d0d7.js","sourcesContent":["module.exports = __webpack_public_path__ + \"img/closeBtn.9647d73b.svg\";","module.exports = __webpack_public_path__ + \"img/wenhao.ae15efd2.svg\";","export * from \"-!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=6c8049cb&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"dialog-wrap\"},[_c('Modal',{attrs:{\"class-name\":\"valut-modal\",\"transfer\":true,\"footer-hide\":true,\"closable\":false},model:{value:(_vm.isOpen),callback:function ($$v) {_vm.isOpen=$$v},expression:\"isOpen\"}},[_c('div',{staticClass:\"modal-content\"},[(!_vm.loading)?_c('div',{staticClass:\"padding-warpper\"},[_c('div',{staticClass:\"step-two\"},[_c('div',{staticClass:\"title-warpper\"},[_c('h2',[_vm._v(\"Close Vault\")])]),_c('div',{staticClass:\"confirm-content flex flex-col items-center\"},[_c('div',[_c('img',{attrs:{\"src\":_vm.getTokenImg(_vm.poolData.tokenName)}}),_c('h2',[_vm._v(_vm._s(_vm._f(\"formatNormalValue\")(_vm.poolData.depositAmount)))]),_c('p',[_vm._v(_vm._s(_vm.poolData.tokenName))]),_c('span',[_vm._v(_vm._s(_vm.$t('vault-will-withdraw')))])]),_c('div',[_c('img',{attrs:{\"src\":_vm.getTokenImg(_vm.poolData.stableName),\"width\":\"48px\"}}),_c('h2',[_vm._v(_vm._s(_vm._f(\"formatNormalValue\")(_vm.poolData.debtAmount)))]),_c('p',[_vm._v(_vm._s(_vm.poolData.stableName))]),_c('span',[_vm._v(_vm._s(_vm.$t('build-will-payback')))])])])]),_c('div',{staticClass:\"items-content\"},[_c('ul',[_c('li',{staticClass:\"title\"},[_vm._v(\" \"+_vm._s(_vm.$t('build-debt'))+\"： \")]),_c('li',[_c('span',[_vm._v(_vm._s(_vm._f(\"formatNormalValue\")(_vm.poolData.debtAmount))+\" \"+_vm._s(_vm.poolData.stableName))])])]),_c('ul',[_c('li',{staticClass:\"title\"},[_vm._v(\" \"+_vm._s(_vm.$t('vault-lai-balance'))+\"： \")]),_c('li',[_c('span',[_vm._v(_vm._s(_vm._f(\"formatNormalValue\")(_vm.LAIBalance))+\" \"+_vm._s(_vm.poolData.stableName))])])]),_c('ul',[_c('li',{staticClass:\"title\"},[_vm._v(\" \"+_vm._s(_vm.$t('vault-liquidation-reserve'))+\"： \")]),_c('li',[_c('span',[_vm._v(_vm._s(_vm._f(\"formatNormalValue\")(_vm.poolData.liquidationReserve))+\" \"+_vm._s(_vm.poolData.stableName))])])]),_c('ul',[_c('li',{staticClass:\"title flex\"},[_c('span',[_vm._v(_vm._s(_vm.$t('build-coll-ratio'))+\":\")]),_c('img',{attrs:{\"src\":require(\"../../../../../assets/img/wenhao.svg\")}})]),(_vm.poolData.collateralRatio)?_c('li',[_c('span',{class:{\n                  'f-green': _vm.poolData.collateralRatio >= 1.5,\n                  'f-warning': _vm.poolData.collateralRatio < 1.5 && _vm.poolData.collateralRatio >= 1.2,\n                  'f-danger': _vm.poolData.collateralRatio < 1.2\n                }},[_vm._v(_vm._s(_vm.BigNumber(_vm.poolData.collateralRatio).times(100).toFixed(2))+\"%\")])]):_c('li',[_c('span',[_vm._v(\"0% \"+_vm._s(_vm.$t('build-to'))+\" 0%\")])])])]),(_vm.shortDebt < 0)?_c('div',{staticClass:\"notice-warpper\"},[_c('div',{staticClass:\"notice-content\"},[_c('img',{attrs:{\"src\":require(\"../../../../../assets/img/notice-red.png\")}}),_c('p',[_vm._v(_vm._s((\"You need \" + (Number(-_vm.shortDebt).toFixed(2)) + \" \" + (_vm.poolData.stableName) + \" more to close your Vault\")))])])]):_vm._e(),_c('div',{staticClass:\"button-warpper\"},[(_vm.shortDebt >= 0 && !_vm.btnLoading)?_c('button',{staticClass:\"btn\",on:{\"click\":_vm.onCloseTroveClick}},[_vm._v(\" \"+_vm._s(_vm.$t('build-confirm'))+\" \")]):_vm._e(),(_vm.shortDebt >= 0 && _vm.btnLoading)?_c('button',{staticClass:\"btn\"},[_vm._v(\" Loading... \")]):_vm._e()]),(_vm.shortDebt < 0)?_c('button',{staticClass:\"btn btn-disabled\"},[_vm._v(\" \"+_vm._s(_vm.$t('build-confirm'))+\" \")]):_vm._e(),_c('div',{staticClass:\"close-warpper\"},[_c('img',{attrs:{\"src\":require(\"../../../../../assets/img/closeBtn.svg\"),\"alt\":\"closeBtn\"},on:{\"click\":_vm.closeDialog}})])]):_vm._e(),(_vm.loading)?_c('div',{staticClass:\"padding-warpper\"},[_c('Loading')],1):_vm._e()])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { mapState } from \"vuex\";\nimport { closeTrove } from '@/contactLogic/buildr/liquity';\nimport BigNumber from \"bignumber.js\";\nimport { fetchTokenBalance } from '@/contactLogic/buildr/create';\n\nexport default {\n  inject: ['reload'],\n  data() {\n    return {\n      isOpen: false,\n      poolData: {},  // 父组件传过来的数据\n      BigNumber,\n      LAIBalance: 0,\n      loading: true,\n      btnLoading: false,\n    };\n  },\n  components: {\n    Loading: () => import(\"@/components/basic/loading.vue\"),\n  },\n  computed: {\n    ...mapState(['web3', 'ethersprovider', 'ethChainID', 'ethAddress']),\n    shortDebt() {\n      const { debtAmount, liquidationReserve } = this.poolData;\n     return BigNumber(this.LAIBalance).minus(BigNumber(debtAmount).minus(liquidationReserve));\n    }\n  },\n  methods: {\n    getTokenImg(token) {\n      return this.$parent.getTokenImg(token);\n    },\n    // 打开弹窗\n    async open(poolData) {\n      this.poolData = poolData;\n      this.isOpen = true;\n      this.getLAIBalance();\n    },\n    async getLAIBalance() {\n      const params = {\n        tokenName: 'LAI',\n        chainID: this.ethChainID,\n        library: this.ethersprovider,\n        account:  this.ethAddress,\n        web3: this.web3,\n      };\n      this.LAIBalance = await fetchTokenBalance(params);\n      this.loading = false;\n    },\n    //关闭弹窗\n    closeDialog(){\n      this.isOpen = false;\n    },\n    async onCloseTroveClick() {\n      const params = {\n        chainID: this.ethChainID,\n        library: this.ethersprovider,\n        account:  this.ethAddress,\n      };\n\n      this.btnLoading = true;\n      try {\n        const tx = await closeTrove(params);\n        this.$parent.sendtx(tx);\n        this.isOpen = false;\n      } catch (e) {\n        this.btnLoading = false;\n      }\n\n    },\n  },\n};\n","import mod from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/eslint-loader/index.js??ref--13-0!./index.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/eslint-loader/index.js??ref--13-0!./index.js?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=6c8049cb&scoped=true&\"\nimport script from \"./index.js?vue&type=script&lang=js&\"\nexport * from \"./index.js?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=6c8049cb&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6c8049cb\",\n  null\n  \n)\n\nexport default component.exports","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAqklEQVQoU2NkgIL/oQxsDC8Y0hn+M0QzMDBoQYWvMTAyLGWQYJjJuJrhF0iMEUT8t2SQZmBm2MLAwGAAMwCNvsDwl8GH8TjDU0awyc8ZTqIoNnSAqD9/AFnfBQZJBnPG/7YMuQz/GSahmJjYAOHOh9IwSUaGPMb/NgwnGBgYzInSwMBwEqThEwMDAy+RGj6TpQHTSdg9DXLESeyexqUB7GlSg5XkiCM1aQAAzyZIc7QaxZMAAAAASUVORK5CYII=\""],"sourceRoot":""}